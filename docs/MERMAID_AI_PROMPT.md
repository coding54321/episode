# Mermaid AI 플로우차트 생성 프롬프트

## 프롬프트 1: 전체 서비스 플로우차트 (메인)

```
Episode 서비스의 전체 사용자 플로우를 flowchart로 그려줘. 

진입점은 두 가지야:
1. 랜딩 페이지 (/) - 로그인하지 않은 사용자 또는 로그인한 사용자 모두 접근 가능
2. 공유 링크 (/share/[nodeId]) - 로그인하지 않은 사용자도 접근 가능

랜딩 페이지에서:
- 로그인 상태 확인
- 로그인 안됨 → 서비스 소개 표시, 기능 소개 페이지 이동 가능 (마인드맵, 공백 진단, 아카이브)
- 로그인 됨 → 프로젝트 목록 페이지로 리다이렉트
- OAuth 코드가 URL에 있으면 → OAuth 콜백 페이지로 리다이렉트

OAuth 콜백에서:
- 인증 코드 처리 → Supabase Auth로 사용자 정보 조회/생성
- 성공 시 → localStorage에 사용자 정보 저장
- returnUrl 있으면 → returnUrl로 이동
- returnUrl 없으면 → 프로젝트 있으면 프로젝트 목록, 없으면 배지 선택 페이지

프로젝트 목록에서:
- 프로젝트 있음 → 프로젝트 카드 표시, 클릭 시 마인드맵 편집 페이지
- 프로젝트 없음 → 빈 상태 표시
- 새 프로젝트 버튼 → 배지 선택 페이지

배지 선택에서:
- 8가지 배지 중 선택 (최소 1개 이상)
- 기타 배지 선택 시 커스텀 라벨 입력
- 완료 버튼 → 프로젝트 초기화 (UUID 생성, 중앙 노드 생성, 배지 노드 생성, 원형 배치) → 마인드맵 편집 페이지

마인드맵 편집 페이지에서:
- 최초 진입 시 온보딩 튜토리얼 표시 (4단계)
- 노드 클릭 → 노드 선택 → 사이드바에 AI 어시스턴트 자동 표시
- 노드 더블클릭 → 인라인 편집 모드
- 노드 우클릭 → 컨텍스트 메뉴 (하위 노드 추가, 편집, STAR 정리하기, 공유하기, 공유 해제, 새 탭에서 열기, 삭제)
- 노드 드래그 → 위치 이동
- Ctrl/Cmd + 드래그 → 캔버스 이동
- Alt + 마우스 휠 → 줌 인/아웃

사이드바 기능:
- 공백 진단하기 버튼 → 공백 진단 탭 (부족 역량확인, 추천 인벤토리)
- 어시스턴트 버튼 → AI 챗봇 탭 (STAR 단계별 대화: Situation → Task → Action → Result)
- STAR 정리하기 버튼 → 에피소드 목록 → STAR 에디터

공유 링크 접근 시:
- nodeId 유효성 검증
- 유효하지 않음 → 404 에러
- 유효함 → 공유 노드 정보 조회
- 로그인 안됨 → 읽기 전용 모드
- 로그인 됨 → 편집 모드 가능 (노드 추가/수정/삭제, 위치 이동, STAR 작성)

모든 조건 분기를 명확히 표시하고, 에러 처리도 포함해줘.
```

## 프롬프트 2: 인증 플로우 상세

```
Episode 서비스의 인증 플로우를 flowchart로 그려줘.

로그인 페이지에서:
- 로그인 상태 확인
- 이미 로그인됨 → returnUrl 있으면 returnUrl로, 없으면 프로젝트 있으면 프로젝트 목록, 없으면 배지 선택 페이지
- 로그인 안됨 → 카카오 로그인 버튼 표시

카카오 로그인 클릭:
- 카카오 OAuth 페이지로 리다이렉트
- 카카오 로그인 완료
- OAuth 콜백 (/auth/callback?code=...)으로 리다이렉트

OAuth 콜백에서:
- 인증 코드 처리
- Supabase Auth로 사용자 정보 조회/생성
- 성공 → localStorage에 사용자 정보 저장 → returnUrl 있으면 returnUrl로, 없으면 프로젝트 있으면 프로젝트 목록, 없으면 배지 선택 페이지
- 실패 → 에러 메시지 표시 → 로그인 페이지 유지

로그아웃:
- Supabase Auth 세션 종료
- localStorage 사용자 정보 삭제
- 로그인 페이지로 리다이렉트

모든 에러 케이스도 포함해줘.
```

## 프롬프트 3: 프로젝트 생성 및 마인드맵 편집 플로우

```
Episode 서비스의 프로젝트 생성부터 마인드맵 편집까지의 플로우를 flowchart로 그려줘.

프로젝트 목록 페이지:
- 프로젝트 있음 → 프로젝트 카드 표시 → 클릭 시 마인드맵 편집 페이지
- 프로젝트 없음 → 빈 상태 → 새 프로젝트 버튼 → 배지 선택 페이지

배지 선택 페이지:
- 8가지 배지 표시
- 배지 선택 (최소 1개 이상)
- 기타 배지 선택 시 → 커스텀 라벨 입력
- 완료 버튼 클릭

프로젝트 초기화:
- UUID 프로젝트 ID 생성
- 프로젝트명 자동 생성: '{사용자명}의 경험 맵'
- 중앙 노드 생성
- 선택한 배지 수만큼 대분류 노드 생성 (원형 배치)
- 각 배지 노드를 중앙 노드의 자식으로 연결
- Supabase DB에 저장
- 마인드맵 편집 페이지로 이동

마인드맵 편집 페이지:
- 최초 진입 → 온보딩 튜토리얼 표시 여부 확인
- 튜토리얼 미표시 → 4단계 튜토리얼 오버레이 (건너뛰기/완료 가능)
- 튜토리얼 완료 → 마인드맵 표시

노드 조작:
- 노드 클릭 → 노드 선택 → 사이드바 AI 어시스턴트 자동 표시
- 노드 더블클릭 → 인라인 편집 모드 → 라벨 수정 → Enter/포커스 아웃 → 저장
- 노드 우클릭 → 컨텍스트 메뉴:
  - 하위 노드 추가 → 방향 선택 → 새 노드 생성 → 편집 모드
  - 편집 → 인라인 편집 모드
  - STAR 정리하기 → 사이드바 STAR 탭 열기
  - 공유하기 → 공유 링크 생성
  - 공유 해제 → 공유 정보 삭제
  - 새 탭에서 열기 → 새 탭 생성
  - 삭제 → 삭제 확인 다이얼로그 → 확인 → 노드 및 하위 노드 삭제
- 노드 드래그 → 위치 이동 → 좌표 저장
- 노드에 마우스 오버 → '+' 버튼 표시 → 클릭 → 하위 노드 추가

캔버스 조작:
- Ctrl/Cmd + 드래그 → 캔버스 이동
- Alt + 마우스 휠 → 줌 인/아웃

모든 액션과 결과를 명확히 표시해줘.
```

## 프롬프트 4: 사이드바 기능 플로우 (공백 진단, 어시스턴트, STAR)

```
Episode 서비스의 사이드바 기능 플로우를 flowchart로 그려줘.

사이드바는 세 가지 메인 탭이 있어:
1. 공백 진단하기
2. 어시스턴트
3. STAR 정리하기

### 공백 진단하기 탭:
공백 진단하기 버튼 클릭 → 사이드바 열기 → 공백 진단 탭

부족 역량확인 서브 탭:
- 기업 선택 → 직무 목록 표시
- 직무 선택 → 문항 목록 표시
- 문항별 답변 어려움 선택 (쉬움/보통/어려움)
- 어려움 선택 → 역량 태그 추출 → 추천 인벤토리에 자동 추가
- 모든 문항 완료 → 분석 결과 표시

추천 인벤토리 서브 탭:
- 역량 태그 목록 조회
- 역량 태그를 마인드맵 노드로 드래그 → 노드 추가 다이얼로그 표시
  - 노드 이름 입력 → 생성하기 → 새 노드 생성 → AI 어시스턴트 자동 열기
  - 취소 → 다이얼로그 닫기
- 역량 태그 삭제
- 역량 태그 클릭 → 연결된 문항 목록 조회

### 어시스턴트 탭:
어시스턴트 버튼 클릭 → 사이드바 열기 → 어시스턴트 탭

- 노드 선택 시 자동 표시
- STAR 단계별 대화 진행:
  - Situation 단계 → 질문 및 답변 수집
  - Task 단계 → 질문 및 답변 수집
  - Action 단계 → 질문 및 답변 수집
  - Result 단계 → 질문 및 답변 수집
- 각 단계 완료 시 진행 상황 시각화 (체크 표시)
- 모든 단계 완료 → STAR 초안 생성 버튼 활성화
- STAR 초안 생성 → STAR 에디터에 자동 로드
- 사용자 메시지 입력 → AI 응답 생성 → 채팅 형식으로 표시

### STAR 정리하기 탭:
STAR 정리하기 버튼 클릭 → 사이드바 열기 → STAR 탭

- 에피소드 노드 목록 조회 → 카드 형식으로 표시 (노드 트리 경로 포함)
- 에피소드 카드 클릭 → STAR 에디터 표시
  - Situation, Task, Action, Result 편집
  - 글자 수 실시간 표시 및 검증
  - 자동 저장
  - 복사 버튼 → 클립보드 복사

사이드바 너비 조절:
- 왼쪽 가장자리 드래그 → 너비 변경 (최소 320px, 최대 화면 너비의 80%)

각 탭과 서브 탭의 전환, 그리고 사용자 액션과 시스템 응답을 명확히 구분해줘.
```

## 프롬프트 5: 공유 링크 플로우

```
Episode 서비스의 공유 링크 생성 및 접근 플로우를 flowchart로 그려줘.

### 공유 링크 생성:
마인드맵 편집 페이지에서:
- 노드 우클릭 → 공유하기 선택
- 공유할 노드 및 하위 노드 정보 수집
- STAR 에셋 포함 여부 선택
- Supabase shared_nodes 테이블에 저장
- 공유 링크 생성: /share/{nodeId}
- 클립보드에 자동 복사
- 복사 완료 토스트 메시지 표시
- 노드에 공유 상태 표시 (공유 아이콘)

### 공유 링크 접근:
공유 링크 (/share/[nodeId]) 접근:
- nodeId 유효성 검증
  - 유효하지 않음 → 에러 메시지 → 404 페이지
  - 유효함 → 공유 노드 정보 조회
    - 공유 노드 없음 → 에러 메시지 → 404 페이지
    - 공유 노드 있음 → 노드 및 하위 노드 로드
      - STAR 에셋 포함 여부 확인
      - 로그인 상태 확인
        - 로그인 안됨 → 읽기 전용 모드
          - 마인드맵 표시 (읽기 전용)
          - 공유한 사용자 정보 표시
          - STAR 에셋 표시 (있는 경우)
          - 읽기 전용 안내 오버레이 표시
        - 로그인 됨 → 편집 모드 가능
          - 노드 추가/수정/삭제 가능 (개별 노드 CRUD)
          - 노드 위치 이동 가능
          - STAR 작성 가능
          - 변경 사항을 원본 프로젝트에 반영

공유 해제:
- 공유된 노드에서 우클릭 → 공유 해제 선택
- 공유 해제 확인 다이얼로그 표시
- 확인 → shared_nodes 테이블에서 공유 정보 삭제
- 노드의 공유 상태 제거
- 기존 공유 링크는 더 이상 접근 불가

모든 조건 분기와 에러 케이스를 포함해줘.
```

## 프롬프트 6: 아카이브 및 대시보드 플로우

```
Episode 서비스의 아카이브와 대시보드 플로우를 flowchart로 그려줘.

### 아카이브 페이지:
아카이브 페이지 (/archive) 접근:
- 로그인 확인
  - 로그인 안됨 → 로그인 페이지로 리다이렉트
  - 로그인 됨 → 모든 프로젝트의 에피소드 노드 조회
    - 에피소드 목록 테이블 형식으로 표시
      - 계층 구조 표시 (프로젝트 > 대분류 > 경험 > 에피소드)
      - STAR 내용, 태그, 회사명 등 정보 표시
      
      - 검색 기능:
        - 검색어 입력 → 에피소드 라벨, STAR 내용, 태그에서 검색 → 실시간 필터링
      
      - 필터링 기능:
        - 대분류(배지)별 필터링
        - 역량 태그별 필터링
        - 회사명별 필터링
        - 여러 필터 조건 조합 가능
      
      - 에피소드 편집:
        - STAR 내용 셀 클릭 → 인라인 편집 모드 → 수정 → Enter/포커스 아웃 → 저장
      
      - 에피소드 삭제:
        - 삭제 버튼 클릭 → 삭제 확인 다이얼로그 → 확인 → 에피소드 및 STAR 에셋 삭제

### 대시보드 페이지:
대시보드 페이지 (/dashboard) 접근:
- 로그인 확인
  - 로그인 안됨 → 로그인 페이지로 리다이렉트
  - 로그인 됨 → 모든 프로젝트의 STAR 자기소개서 목록 조회
    - STAR 목록 카드 형식으로 표시
      - 제목, 회사명, 역량 태그, 작성일 표시
      - 최근 작성일 기준 내림차순 정렬
      
      - 검색 기능:
        - 검색어 입력 → 제목, 내용, 회사명, 역량 태그에서 검색 → 실시간 필터링
      
      - STAR 상세 조회:
        - STAR 카드 클릭 → 상세 다이얼로그 표시
          - Situation, Task, Action, Result 전체 내용 표시
          - 제목, 회사명, 역량 태그 등 메타데이터 표시
          - 작성일 표시
          - 복사 버튼 → 클립보드 복사
      
      - STAR 삭제:
        - 삭제 버튼 클릭 → 삭제 확인 다이얼로그 → 확인 → STAR 에셋 삭제

모든 기능과 조건 분기를 명확히 표시해줘.
```

## 프롬프트 7: 통합 플로우차트 (전체 서비스)

```
Episode 서비스의 전체 사용자 여정을 하나의 큰 flowchart로 그려줘.

서비스는 마인드맵 기반 취업준비 서비스로, 사용자의 경험을 구조화하고 STAR 방식으로 자기소개서를 작성할 수 있도록 도와주는 서비스야.

진입점:
1. 랜딩 페이지 (/)
2. 공유 링크 (/share/[nodeId])

랜딩 페이지에서 시작:
- 로그인 상태 확인 → 로그인 안됨: 서비스 소개, 기능 소개 페이지 이동 가능 → 시작하기 → 로그인 페이지
- 로그인 됨: 프로젝트 목록으로 리다이렉트
- OAuth 코드 있음: OAuth 콜백으로 리다이렉트

로그인 페이지:
- 카카오 로그인 → OAuth 페이지 → OAuth 콜백 → 사용자 정보 저장 → returnUrl 또는 프로젝트 목록/배지 선택

프로젝트 목록:
- 프로젝트 있음: 프로젝트 카드 → 클릭 → 마인드맵 편집
- 프로젝트 없음: 새 프로젝트 → 배지 선택

배지 선택:
- 배지 선택 (최소 1개) → 프로젝트 초기화 → 마인드맵 편집

마인드맵 편집:
- 온보딩 튜토리얼 (최초 1회)
- 노드 조작 (클릭, 더블클릭, 우클릭, 드래그)
- 캔버스 조작 (이동, 줌)
- 사이드바 기능:
  - 공백 진단: 기업/직무 선택 → 문항 체크 → 추천 인벤토리 → 태그 드롭 → 노드 생성
  - 어시스턴트: STAR 대화 (Situation → Task → Action → Result) → STAR 초안 생성
  - STAR 정리하기: 에피소드 목록 → STAR 에디터 → 편집/저장/복사
- 노드 공유: 공유 링크 생성 → 클립보드 복사

공유 링크 접근:
- nodeId 검증 → 공유 노드 조회 → 로그인 상태 확인
- 로그인 안됨: 읽기 전용 모드
- 로그인 됨: 편집 모드 (노드 CRUD, STAR 작성)

아카이브:
- 에피소드 목록 → 검색/필터링 → 편집/삭제

대시보드:
- STAR 목록 → 검색 → 상세 조회 → 복사/삭제

모든 페이지에서 로그아웃 가능 → 로그인 페이지로 리다이렉트

각 단계의 조건 분기, 에러 처리, 사용자 선택지를 모두 포함하고, 플로우가 명확하게 연결되도록 해줘.
```

## 사용 방법

위의 프롬프트들을 Mermaid AI (https://www.mermaidchart.com/ai-chat 또는 다른 Mermaid AI 도구)에 입력하면 자동으로 Mermaid 다이어그램 코드를 생성합니다.

### 추천 사용 순서:
1. **프롬프트 7 (통합 플로우차트)** - 전체 개요를 먼저 생성
2. **프롬프트 1-6** - 각 기능별 상세 플로우를 별도로 생성하여 보완

### 추가 옵션:
- 생성된 다이어그램을 수정하고 싶으면 "노드 색상 추가", "조건 분기 강조", "에러 경로 빨간색으로" 등의 추가 지시를 줄 수 있습니다.
- 다이어그램 스타일을 변경하고 싶으면 "스타일을 더 깔끔하게", "노드 크기 조정", "화살표 두께 조정" 등의 지시를 줄 수 있습니다.
